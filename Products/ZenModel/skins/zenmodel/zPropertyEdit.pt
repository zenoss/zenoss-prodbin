<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">

<form method="post"
    tal:attributes="action string:${request/URL1}">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>
<table class="zentable" cellpadding="3" cellspacing="1"
    tal:define="props here/zenPropertyIds; serverities /here/dmd/ZenEventManager/getSeverities; actions /here/dmd/ZenEventManager/getEventActions">
    <tr>
      <th class="tabletitle" colspan="4">
      zProperties Configuration
      </th>
    </tr>
    <tr>
      <th class="tableheader" align="center">Property</th>
      <th class="tableheader" align="center">Value</th>
      <th class="tableheader" align="center">Type</th>
      <th class="tableheader" align="center">Path</th>
    </tr>
    <tal:block tal:repeat="prop props"> 
    <tr tal:define="odd repeat/prop/odd"
        tal:attributes="class python:test(odd, 'odd', 'even')">
      <td class="tablevalues" tal:content="prop">
        zPingInterfaceRegex
      </td>
      <td class="tablevalues" tal:condition="not: here/isManager"
        tal:content="python: here.zenPropertyString(prop)"/>
      <td class="tablevalues" tal:condition="here/isManager"
        tal:define="ptype python:here.zenPropertyType(prop);
                    pvalue python: here.zenPropertyString(prop)">
            <span tal:condition="python: ptype=='boolean'">
                <select class="tablevalues" 
                    tal:attributes="name python:prop+':'+ptype">
                    <option tal:repeat="e python:(True,False)" tal:content="e"
                    tal:attributes="value e; selected python:e==pvalue"/>
                </select>
            </span>
            <span tal:condition="python: ptype=='lines'">
            <textarea class="tablevalues" rows='3' cols="33"
                tal:attributes="name python:prop+':'+ptype"
                tal:content="pvalue">
            </textarea>        
            </span>
            <span tal:condition="python: ptype=='text'">
            <textarea class="tablevalues" rows='5' cols="33"
                tal:attributes="name python:prop+':'+ptype"
                tal:content="pvalue">
            </textarea>        
            </span>
            <span tal:condition="python: prop in 'zEventSeverity zFailSeverity'.split()">
            <select class="tablevalues" 
                tal:attributes="name python:prop+':'+ptype">
                <option tal:repeat="sev serverities"
                    tal:content="python:sev[0]"
                    tal:attributes="value python:sev[1]; selected python:sev[1]==pvalue" />
            </select>
            </span>
            <span tal:condition="python: prop=='zEventAction'">
            <select class="tablevalues" 
                tal:attributes="name python:prop+':'+ptype">
                <option tal:repeat="a actions"
                    tal:content="a"
                    tal:attributes="value a; selected python:a==pvalue" />
            </select>
            </span>
            <span tal:condition="python: ptype not in 'boolean lines text'.split() and prop not in 'zEventSeverity zEventAction zFailSeverity'.split()">
            <input class="tablevalues" type="text" size="40"
                tal:attributes="value pvalue;name python:prop+':'+ptype"/>
            </span>
      </td>
      <td class="tablevalues"
        tal:content="python: here.zenPropertyType(prop)"> 
        int
      </td>
      <td class="tablevalues" 
        tal:content="python: here.zenPropertyPath(prop)"> 
        /Devices/Servers
      </td>
    </tr>
    </tal:block>
    <tr class="tableheader" tal:condition="here/isManager">
    <td colspan="5">
        <input class="tableheader" type="submit" 
            name="saveZenProperties:method" value=" Save " />
    </td>
    </tr>
</table>
</form>

<form tal:condition="here/isManager" method="post"
    tal:attributes="action string:${request/URL1}">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>
<table class="zentable" cellpadding="3" cellspacing="1">
<tr><th class="tabletitle">Delete Local Property</th></tr>
<tr class="tableheader">
    <td>
        <select name="propname" class="tableheader">
            <option tal:repeat="
                propname python:here.zenPropertyIds(False)"
                tal:content="propname" tal:attributes="value propname">
                    propname
            </option>
        </select>
        <input class="tableheader" type="submit" 
            name="deleteZenProperty:method" value=" Delete " />
    </td>
</tr>
</table>
</form>

</tal:block>
</tal:block>
