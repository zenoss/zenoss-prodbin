<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="title">Zenoss: ZenPacks</tal:block>
  <tal:block metal:fill-slot="contentPane">

    <form method="POST" name="zenPackList"
        tal:attributes="action here/absolute_url_path;"
        enctype="multipart/form-data"
	    tal:define="tableName string:packlist;
		      objects here/packs;
		      batch python:container.dmd.ZenTableManager.getBatch(tableName,objects);">
      <input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>

      <input type="hidden" name="tableName" tal:attributes="value tableName"/>
      

        <tal:block tal:define=" tabletitle string:Loaded Zen Packs;
		   		menu_id string:ZenPack_list;" >
        <tal:block metal:use-macro="here/zenuimacros/macros/zentable">

        <tal:block metal:fill-slot="zentablecontents">
        <!-- BEGIN TABLE CONTENTS -->
        <tr>
          <th class="tableheader" width="1" />
          <th class="tableheader">Pack</th>
          <th class="tableheader">Package</th>
          <th class="tableheader">Author</th>
          <th class="tableheader">Version</th>
          <th class="tableheader">Egg</th>
        </tr>
	
	
	<tr tal:repeat='pack objects'>
	    <tal:block tal:define="isBroken python: not hasattr(pack,'isBroken') or pack.isBroken();">
	    <tal:block tal:condition="not: isBroken">
          <td class="tablevalue"> 
              <input type="checkbox" name="ids:list"  
                  tal:attributes="value pack/id"/> 
          </td>
		  <td class="tablevalue">
		    <a tal:attributes="href pack/getPrimaryUrlPath" 
		       tal:content="pack/id"/>
		  </td>
		  <td class="tablevalue" tal:condition="pack/isEggPack"
		      tal:content="pack/getPackageName"/>
		  <td class="tablevalue" tal:condition="not:pack/isEggPack"
		      tal:content="string:n/a"/>
		  <td class="tablevalue" tal:content="pack/author"/>
		  <td class="tablevalue" tal:content="pack/version"/>
		  <td class="tablevalue" 
		    tal:content="python: pack.isEggPack() and 'Yes' or 'No'"/>
      </tal:block>
	  <tal:block tal:condition="isBroken">
	      <td class="tablevalue"></td>
		  <td class="tablevalue">
			<tal:dummy tal:replace="python:here.dmd.ZenPackManager.getBrokenPackName(pack)" />
		  </td>
		  <td class="tablevalue" colspan="6">
		      This pack is missing or broken.  You may need to restart Zope.
		  </td>
	  </tal:block>
     </tal:block>
	</tr>
      
        <!-- END TABLE CONTENTS -->

        </tal:block>
        </tal:block>
        </tal:block>
        

    </form>

  </tal:block>
</tal:block>
