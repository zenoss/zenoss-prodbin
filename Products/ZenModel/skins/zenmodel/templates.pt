<!-- ======================================================
    This page is used as the page-level templates
    and associated macros
 ====================================================== -->

<!-- ======================================================
    Page1 - page template that has slots for 
            breadCrumb and content 
 ====================================================== -->
<tal:block metal:define-macro="page1">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
"http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
<html>
    <head>
    <title>
    <tal:block metal:define-slot="title">
        <tal:block tal:content="string:Zenoss: ${here/titleOrId}"/>
    </tal:block>
    </title>
        <tal:block metal:use-macro="here/templates/macros/head1"/>
        <tal:block metal:define-slot="head-local"/>
        <tal:block metal:use-macro="here/zenuimacros/macros/jsutils"/>
        <script type="text/javascript" src="/++resource++extjs/adapters/ext/ext-base.js">
        </script>
        <script>
        (function() {
            var ua = navigator.userAgent.toLowerCase();
            if (ua.indexOf("firefox/3.6") > -1) {
                Ext.toArray = function(a, i, j, res) {
                    res = [];
                    Ext.each(a, function(v) { res.push(v); });
                    return res.slice(i || 0, j || res.length);
                }
            }
        })();
        </script>
        <script type="text/javascript" id="extall" src="/++resource++extjs/ext-all.js"></script>
    </head>
	<body class="yui-skin-sam">
    <tal:block metal:use-macro="here/dialogmacros/macros/proxyForm"/>
    <tal:block metal:use-macro="here/dialogmacros/macros/dialog_with_buttons"/>
	   <div id="frame">
            <form name="proxy_form" id="proxy_form"
                style="position:absolute;visibility:hidden"
                tal:attributes="action here/absolute_url_path"></form>
            <tal:block tal:condition="not:exists:request/cookies/newui">
            <div  metal:use-macro="here/templates/macros/topPane"/>
            <div id="infoBar">
                <div id="leftPaneToggle"></div>
                <div metal:define-slot="breadcrumbs" id="breadCrumbPane">
                   <span metal:use-macro="here/miscmacros/macros/breadCrumbs" />
                </div>
            </div>
            <tal:block metal:use-macro="
                here/maintemplate-extras/macros/panetoggle"/>
            <div metal:use-macro="here/leftPane/macros/leftPane"/>
            </tal:block>
            <div tal:omit-tag="exists:request/cookies/newui" id="rightPane">
                <tal:block metal:define-slot="rightPane">
                    <div id="contentPane">
                        <tal:block metal:define-slot="contentPane">
                            CONTENT GOES HERE
                        </tal:block>
                    </div>
                </tal:block>
            </div>
       </div>
    </body>
</html>
</tal:block>
                
                
<!-- ======================================================
    Pointer to new leftPane macro
 ====================================================== -->
<tal:block metal:define-macro="leftPane">
    <tal:block metal:use-macro="here/leftPane/macros/leftPane"/>
</tal:block>

<!-- ======================================================
    pageClean - page template that has none of the ornamentation
    of the regular templates
 ====================================================== -->
<tal:block metal:define-macro="pageClean">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>
            <tal:block tal:content="string:Zenoss: ${here/titleOrId}"/>
        </title>
        <tal:block metal:use-macro="here/templates/macros/head1"/>
        <tal:block metal:define-slot="head-local"/>
    </head>
	<body>
        <div id="contentPane">
            <tal:block metal:define-slot="contentPane">
                CONTENT GOES HERE
            </tal:block>
        </div>
    </body>
</html>
</tal:block>


<!-- ======================================================
    Page2 - page template that adds standard
        breadCrumb and nav tabs automatically
 ====================================================== -->
<tal:block metal:define-macro="page2">
    <html metal:use-macro="here/templates/macros/page1" >
        <tal:block metal:fill-slot="title">
            <tal:block metal:define-slot="title">
                <tal:block tal:content="string:Zenoss: ${here/titleOrId}"/>
            </tal:block>
        </tal:block>
        <tal:block metal:fill-slot="head-local">
        <tal:block metal:define-slot="head-local"/>
        </tal:block>
        <tal:block metal:fill-slot="breadcrumbs">
            <div id="breadCrumbPane">
            <tal:block metal:define-slot="breadcrumbs">
                   <span metal:use-macro="here/miscmacros/macros/breadCrumbs" />
            </tal:block>
            </div>
        </tal:block>
        <tal:block metal:fill-slot="rightPane">
            <div metal:use-macro="here/templates/macros/tabsPane"/>
            <div id="contentPane">
                <tal:block metal:define-slot="contentPane">
                        CONTENT GOES HERE
               </tal:block>
            </div>
        </tal:block>
    </html>
</tal:block>

<!-- ======================================================
    Page3 - page template with std BreadCrumbs and no tabs
 ====================================================== -->
<tal:block metal:define-macro="page3">
    <html metal:use-macro="here/templates/macros/page1" >
        <tal:block metal:fill-slot="rightPane">
            <div id="contentPane">
                <tal:block metal:define-slot="contentPane">
                        CONTENT GOES HERE
               </tal:block>
            </div>
        </tal:block>
    </html>
</tal:block>

<!-- ======================================================
    head1 - standard header
 ====================================================== -->
<tal:block metal:define-macro="head1">
    <tal:block metal:use-macro="here/maintemplate-extras/macros/head1"/>
</tal:block>


<!-- ======================================================
    topPane - standard top area with logo, etc...
 ====================================================== -->
<div id="topPane" metal:define-macro="topPane">
    <a href="/zport/dmd/Dashboard">
    <div class="logo">
    </div>
    </a>
    <div id="settings">
    <ul>
        <li>
        <span id="header-username">
        <tal:block tal:content="request/AUTHENTICATED_USER"/>
        </span>
        </li>
        <li>
        <a tal:attributes="href here/dmd/ZenUsers/getUserSettingsUrl">
            Preferences</a>
        </li>
        <li>
        <a href="/zport/dmd/logoutUser">Logout</a>
        </li>
        <li>
        <a tal:attributes="href string:
            http://www.zenoss.com/help?version=${here/dmd/About/getZenossVersionShort}
        " target="_blank">Help</a>
        </li>
    </ul>
    <tal:block metal:use-macro="here/searchMacro/macros/searchbox"/>
    </div>
    <div id="system_clock_container">Zenoss server time: 
    <span id="system_clock">Now o'clock</span>
    <script tal:content="string: var start_time = '${here/server_time}';">
    var x;
    </script>
    <script>
    var server_time = isoTimestamp(start_time).getTime();
    function server_now() {
        return new Date(server_time);
    }
    function getServerTime() {
        return toISOTime(server_now());
    }
    function getServerTimestamp() {
        return toISOTimestamp(server_now());
    }
    function updateTime(){
        server_time += 1000;
        $('system_clock').innerHTML = getServerTime();
        callLater(1, updateTime)
    }
    addLoadEvent(updateTime);
    </script>
    </div>
</div>

<!-- ======================================================
    BreadCrumbsPane
 ====================================================== -->
<div id="breadCrumbPane" metal:define-macro="breadCrumbPane"
    style="position:relative">
    <span metal:use-macro="here/miscmacros/macros/breadCrumbs" />
</div>

<!-- ======================================================
    tabsPane
 ====================================================== -->
<div id="tabsPane" metal:define-macro="tabsPane"
        tal:define="ztabs python:here.zentinelTabs(template.id);
                    tabnames python:[x['name'] for x in ztabs];
                    isnewui exists:request/cookies/newui">
   <table class="tabtable" cellpadding="0" cellspacing="0"
           tal:condition="python:(not isnewui and ztabs and not getattr(request, 'notabs', False))">
       <tr tal:define="menu_ids menu_ids |
           python:['More','Manage','Edit', 'Actions','Add','TopLevel']">
        <tal:block tal:condition="python:hasattr(here, 'getMenus')">
           <tal:block tal:define="hasMenus python:here.getMenus(menu_ids, here)">
        <td class="contextmenutab" 
            tal:condition="hasMenus">
        <span metal:use-macro="here/zenuimacros/macros/basemenu"/>
        </td>
        <td class="tabtableleftcap"
            tal:condition="not:hasMenus" >
        <div style="margin:0;padding:0;width:21px;">&nbsp;</div>
        </td>
        </tal:block>
        </tal:block>
        <tal:block tal:condition="python:not hasattr(here, 'getMenus')">
        <td class="tabtableleftcap">
        <div style="margin:0;padding:0;width:21px;">&nbsp;</div>
        </td>
        </tal:block>
           <td tal:repeat="tab ztabs"
               tal:attributes="class python:tab.get('selected', None) 
                                and 'tabletitleselected'">


    <tal:block tal:condition="python:tab.get('selected', None)">
    <div class="tablinehider"></div>
    <div class="tableft">
         <div class="tabright">
             <div class="tabcenter">
           <a class="tabletitle" tal:content="tab/name"
               tal:attributes="href python:
                   '%s/%s'% (here.absolute_url_path(),tab['action']);"
                >TabName</a>
             </div>
         </div>
     </div>
     </tal:block>
     <tal:block condition="python:not tab.get('selected', None)">
           <a class="tabletitle" tal:content="tab/name"
               tal:attributes="href python:
                   '%s/%s'% (here.absolute_url_path(),tab['action']);"
                >TabName</a>

     </tal:block>


           <div id="selectedtablinehider"
       tal:condition="python:tab.get('selected',None)">
           </div>

           </td>
        <td class='tabletitleselected'
            tal:condition="python:False">
           <div id="selectedtablinehider">
            Other Page
           </div>
        </td>
        <td class="tabtablecap">&nbsp;</td>
       </tr>
   </table>
</div>

<!-- ======================================================
    newTabsPane
 ====================================================== -->
<div id="newTabsPane" metal:define-macro="newTabsPane"
        tal:define="ztabs python:here.zentinelTabs(template.id, request.getURL());
                    tabnames python:[x['name'] for x in ztabs];">
   <table class="tabtable" cellpadding="0" cellspacing="0"
           tal:condition="python:(ztabs and not getattr(request, 'notabs', False))">
       <tr tal:define="menu_ids menu_ids |
           python:['More','Manage','Edit', 'Actions','Add','TopLevel']">
        <tal:block tal:condition="python:hasattr(here, 'getMenus')">
           <tal:block tal:define="hasMenus python:here.getMenus(menu_ids, here)">
        <td class="contextmenutab" 
            tal:condition="hasMenus">
        <span metal:use-macro="here/zenuimacros/macros/basemenu"/>
        </td>
        <td class="tabtableleftcap"
            tal:condition="not:hasMenus" >
        <div style="margin:0;padding:0;width:21px;">&nbsp;</div>
        </td>
        </tal:block>
        </tal:block>
        <tal:block tal:condition="python:not hasattr(here, 'getMenus')">
        <td class="tabtableleftcap">
        <div style="margin:0;padding:0;width:21px;">&nbsp;</div>
        </td>
        </tal:block>
           <td tal:repeat="tab ztabs"
               tal:attributes="class python:tab.get('selected', None) 
                                and 'tabletitleselected'">


    <tal:block tal:condition="python:tab.get('selected', None)">
    <div class="tableft">
         <div class="tabright">
             <div class="tabcenter">
           <a class="tabletitle" tal:content="tab/name"
               tal:attributes="href python:
                   '%s/%s'% (here.absolute_url_path(),tab['action']);"
                >TabName</a>
             </div>
         </div>
     </div>
    <div class="tablinehider"></div>
     </tal:block>
     <tal:block condition="python:not tab.get('selected', None)">
           <a class="tabletitle" tal:content="tab/name"
               tal:attributes="href python:
                   '%s/%s'% (here.absolute_url_path(),tab['action']);"
                >TabName</a>

     </tal:block>


           <div id="selectedtablinehider"
       tal:condition="python:tab.get('selected',None)">
           </div>

           </td>
        <td class='tabletitleselected'
            tal:condition="python:False">
           <div id="selectedtablinehider">
            Other Page
           </div>
        </td>
        <td class="tabtablecap">&nbsp;</td>
       </tr>
   </table>
</div>

<!-- ======================================================
     contentSeparator
 ====================================================== -->
<tal:block metal:define-macro="contentSeparator">
    <br/>
</tal:block>

<!-- ======================================================
     infoBarExtra - place to put extra stuff in infobar
 ====================================================== -->
<tal:block metal:define-macro="infoBarExtra">
</tal:block>
