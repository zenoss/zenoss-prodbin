<tal:block metal:use-macro="here/templates/macros/page2">    
<tal:block metal:fill-slot="contentPane">

<form method=post 
    tal:attributes="action string:${here/absolute_url_path}">
    <input type="hidden" name="zenScreenName" 
        tal:attributes="value template/id" /> 


        <tal:block tal:define="message request/message | string:State at time:; 
        tabletitle string:${message} ${here/getNowString}">
        <tal:block metal:use-macro="here/zenuimacros/macros/zentable">

        <tal:block metal:fill-slot="zentablecontents">
        <!-- BEGIN TABLE CONTENTS -->
            
    <tr>
        <td class="tableheader">Name</td>
        <td class="tablevalues" tal:condition="here/isManager">
            <input class="tablevalues" type="text" name="newId" size="40"
                tal:attributes="value here/id" />
        </td>
        <td class="tablevalues" tal:condition="not:here/isManager"
            tal:content="here/id"/>
    </tr>
    <tr>
        <td class="tableheader">
        </td>
        <td class="tableheader" colspan="3">
            <input class="tableheader" type="submit" value=" Save "
                name="zmanage_editProperties:method" />
        </td>
    </tr>

        <!-- END TABLE CONTENTS -->

        </tal:block>
        </tal:block>
        </tal:block>
        

</form>
<br />

<form method="POST" name="collectionsForm"
    tal:attributes="action here/absolute_url_path">
    <input type="hidden" name="zenScreenName" 
        tal:attributes="value template/id"/>
        
    <tal:block tal:define="tableName string:collectionsTable; 
        objects here/getCollections;
        batch python:here.ZenTableManager.getBatch(tableName,objects,
                                                sortedHeader='getId'); 
        tabletitle string:Collections;
		menu_id string:collectionList">
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
    <tal:block metal:use-macro="here/zenuimacros/macros/zentable">
    <tal:block metal:fill-slot="zentablecontents">
            
    <tr>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'id','Name')"/>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getNumItems','Number of Items')"/>
    </tr>
    <tr class="tablevalues" tal:repeat="collection batch">
        <td>
            <input tal:condition="here/isManager" 
                type="checkbox" name="ids:list" 
                tal:attributes="value collection/getId"/>
            <a tal:condition="here/isManager"
                tal:attributes="href collection/getPrimaryUrlPath" 
                tal:content="collection/getId">name</a>
            <tal:block tal:condition="not:here/isManager"
                 tal:content="collection/getId"/>
        </td>
        <td tal:content="collection/getNumItems" />
    </tr>

        </tal:block>
        </tal:block>
        </tal:block>
        
</form>
<br />

<tal:block metal:use-macro="here/graphDefList/macros/graphDefList">
</tal:block>
<br />


<form method="POST" name="graphGroupForm"
    tal:attributes="action here/absolute_url_path">
    <input type="hidden" name="zenScreenName" t
        al:attributes="value template/id"/>
    <tal:block tal:define="tableName string:graphGroupList; 
        objects here/getGraphGroups;
        batch python:here.ZenTableManager.getBatch(tableName,objects,
                                                sortedHeader='getId'); 
        tabletitle string:Graph Groups;
		menu_id string:GraphGroup_list">
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
    <tal:block metal:use-macro="here/zenuimacros/macros/zentable">
    <tal:block metal:fill-slot="zentablecontents">
            
    <tr>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'sequence','Seq')"/>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getId','Name')"/>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'collectionId','Collection')"/>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'graphDefId','Graph Definition')"/>
    </tr>
    <tr class="tablevalues" tal:repeat="graphGroup batch">
        <td>
            <input tal:condition="here/isManager" 
                type="text" name="seqmap:list" size="2"
                tal:attributes="value graphGroup/sequence"
                />
            <input tal:condition="here/isManager"
                type="hidden" name="origseq:list"
                tal:attributes="value graphGroup/sequence"
                />
            <span tal:condition="not:here/isManager" />
        </td>
        <td>
            <input tal:condition="here/isManager" 
                type="checkbox" name="ids:list" 
                tal:attributes="value graphGroup/getId"/>
            <a tal:condition="here/isManager"
                tal:attributes="href graphGroup/getPrimaryUrlPath" 
                tal:content="graphGroup/getId">name</a>
            <tal:block tal:condition="not:here/isManager"
                 tal:content="graphGroup/getId"/>

        </td>
        <td>
            <a  tal:condition="graphGroup/getCollectionUrl"
                tal:attributes="href graphGroup/getCollectionUrl"
                tal:content="graphGroup/collectionId" />
            <span tal:condition="not: graphGroup/getCollectionUrl"
                tal:content="string: ${graphGroup/collectionId} (missing)"/>
        </td>
        <td>
            <a  tal:condition="graphGroup/getGraphDefUrl"
                tal:attributes="href graphGroup/getGraphDefUrl"
                tal:content="graphGroup/graphDefId" />
            <span tal:condition="not: graphGroup/getGraphDefUrl"
                tal:content="string: ${graphGroup/graphDefId} (missing)"/>
        </td>
    </tr>

        </tal:block>
        </tal:block>
        </tal:block>
        
</form>


</tal:block>
</tal:block>
