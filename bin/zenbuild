#! /usr/bin/env bash
#############################################################################
# This program is part of Zenoss Core, an open source monitoring platform.
# Copyright (C) 2007, Zenoss Inc.
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 as published by
# the Free Software Foundation.
#
# For complete information please visit: http://www.zenoss.com/oss/
#############################################################################

. $ZENHOME/bin/zenfunctions

if [ "${USE_ZENDS}" = "1" ];then
    $ZENHOME/bin/zenglobalconf -u zodb-socket=$ZENDSHOME/data/zends.sock
    $ZENHOME/bin/zenglobalconf -u zep-port=13306
fi

# sync global.conf params to zope's db config
$ZENHOME/bin/zenglobalconf -s 


if [ -z "$CMD" ]; then
    $PYTHON $ZENHOME/Products/ZenModel/zenbuild.py
else
    $PYTHON $ZENHOME/Products/ZenModel/zenbuild.py "$CMD" "$@"
fi

