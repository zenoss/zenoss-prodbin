<tal:block metal:use-macro="here/templates/macros/page2">
<tal:block metal:fill-slot="contentPane">

<table class="zentable" cellpadding="3" cellspacing="1"
    tal:condition="python:here.id != 'Networks'">
    <tr>
      <th class="tabletitle" colspan="4">Network</th>
    </tr>
    <tr>
        <td class="tableheader">Address</td>
        <td class="tablevalues"
            tal:content="string:${here/id}/${here/netmask}"/>
        <td class="tableheader">IPs Used/Free</td>
        <td class="tablevalues" 
            tal:content="string:${here/countIpAddresses}/${here/freeIps}"/>
    </tr>
    <tr tal:condition="here/location">
      <td class="tableheader">Location</td>
      <td class="tablevalues" colspan="3"
        tal:content="structure here/location/getPrimaryLink"/>
    </tr>
    <tr tal:condition="here/description">
        <td class="tableheader">Description</td>
        <td class="tablevalues" colspan="4" tal:content="here/description"/>
    </tr>
</table>

<span metal:use-macro="here/templates/macros/contentSeparator"/>

<form method="post" tal:attributes="action here/absolute_url_path">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>
<table class="zentable" cellpadding="3" cellspacing="1"
    tal:define="objects here/children;
    tableName string:networkoverviewsubnets;
    batch python:here.ZenTableManager.getBatch(tableName,objects);">
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
  <tr>
      <th class="tabletitle" align="left" colspan="4">
        Subnetworks
      </th>
  </tr>
  <span tal:condition="objects">
  <tr>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'primarySortKey','Address','cmp')">
        Address
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'countChildren','Subnets','cmp')">
        Subnets
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'countIpAddresses','Number of IPs','cmp')">
        Number of IPs
    </th>
    <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'freeIps','Free IPs','cmp')">
        Free IPs
    </th>
  </tr>
  <tr tal:repeat="net batch">
    <td class="tablevalues" align="left">
    <input tal:condition="here/isManager" 
        type="checkbox" name="organizerPaths:list" 
        tal:attributes="value net/getId"/>
    <a tal:attributes="href net/getPrimaryUrlPath"
        tal:content="string:${net/id}/${net/netmask}">1.2.3.0/24</a>
    </td>
    <td class="tablevalues" align="center" tal:content="net/countChildren"/>
    <td class="tablevalues" align="center" tal:content="net/countIpAddresses"/>
    <td class="tablevalues" align="center" tal:content="net/freeIps"/>
  </tr>
  <tr>
    <td colspan="4" class="tableheader" align='center'>
        <span metal:use-macro="here/zenTableNavigation/macros/navbody" />
    </td>
  </tr>
  </span>
  <tr tal:condition="here/isManager">
    <td class="tableheader" colspan="4">
        <span metal:use-macro="here/deviceOrganizerStatus/macros/editor" />
    </td>
  </tr>
</table>
</form>
<span metal:use-macro="here/templates/macros/contentSeparator"/>

<form method="post" tal:attributes="action here/absolute_url_path">
<input type="hidden" name="zenScreenName" tal:attributes="value template/id"/>
<table class="zentable" cellpadding="3" cellspacing="1"
    tal:define="objects here/ipaddresses/objectValuesAll;
    tableName string:networkoverviewipaddresses;
    batch python:here.ZenTableManager.getBatch(tableName,objects);"
    tal:condition="objects">
    <input type='hidden' name='tableName' tal:attributes="value tableName" />
    <tr>
      <th class="tabletitle" align="left" colspan="6">
        IP Addresses
      </th>
    </tr>
    <tr>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'primarySortKey','Address','cmp')">
            Address
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'ptrName','PTR')">
            PTR
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getDeviceName','Device')">
            Device
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                    tableName,'getInterfaceName','Interface')">
            Interface
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'getPingStatusNumber','Ping')">
            Ping Status
        </th>
        <th tal:replace="structure python:here.ZenTableManager.getTableHeader(
                tableName,'getSnmpStatusNumber','SNMP')">
            Snmp Status
        </th>
  </tr>
  <tr tal:repeat="ip batch">
    <td class="tablevalues" align="left">
        <a href="_" 
        tal:attributes="href ip/absolute_url"
        tal:content="ip/getIpAddress">1.1.1.1/24</a>
    </td>
    <td class="tablevalues" tal:content="ip/ptrname"/>
    <td class="tablevalues" align="left">
        <a href="_" 
        tal:condition="ip/getDeviceUrl"
        tal:attributes="href ip/getDeviceUrl"
        tal:content="ip/getDeviceName">devicenamelink</a>
        <span tal:condition="not: ip/getDeviceUrl" 
            tal:content="ip/getDeviceName" />
    </td>
    <td class="tablevalues" align="left"
        tal:content="ip/getInterfaceName">
        intname
    </td>
    <td tal:define="status ip/getPingStatus"
        tal:attributes="class python:ip.getStatusCssClass(status)"
        tal:content="python:here.convertStatus(status)" align="center">
        ping status
    </td>
    <td tal:define="status ip/getSnmpStatus"
        tal:attributes="class python:ip.getStatusCssClass(status)"
        tal:content="python:here.convertStatus(status)" align="center">
        Snmp Status
    </td>
    </tr>
  <tr>
    <td colspan="6" class="tableheader">
        <span metal:use-macro="here/zenTableNavigation/macros/navbody" />
    </td>
  </tr>
</table>
</form>

</tal:block>
</tal:block>
